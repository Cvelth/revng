#
# This file is distributed under the MIT License. See LICENSE.md for details.
#

commands:
  - type: revng.test-layout
    from:
      - type: revng.qemu-run
        filter: abi-test-function-description
      - type: revng-qa.compiled-with-debug-info
        filter: abi-test-function-prototypes
    command: |-
      "${SOURCES_ROOT}/share/revng/test/tests/abi/test-layout.sh" "${ABI_NAME}" "${INPUT1}/default.stdout" "${INPUT2}"

  - type: revng.test-conversion
    from:
      - type: revng.qemu-run
        filter: abi-test-function-description
      - type: revng-qa.compiled-with-debug-info
        filter: abi-test-function-prototypes
    command: |-
      "${SOURCES_ROOT}/share/revng/test/tests/abi/test-conversion.sh" "${ABI_NAME}" "${INPUT1}/default.stdout" "${INPUT2}"
